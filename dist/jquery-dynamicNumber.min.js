/*! jQuery dynamicNumber - v0.1.0 - 2014-09-06
* https://github.com/amazingSurge/jquery-dynamicNumber
* Copyright (c) 2014 amazingSurge; Licensed GPL */
!function(a,b,c,d){"use strict";function e(){return c.performance.now?c.performance.now():Date.now()}Date.now||(Date.now=function(){return(new Date).getTime()});for(var f=["webkit","moz"],g=0;g<f.length&&!c.requestAnimationFrame;++g){var h=f[g];c.requestAnimationFrame=c[h+"RequestAnimationFrame"],c.cancelAnimationFrame=c[h+"CancelAnimationFrame"]||c[h+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(c.navigator.userAgent)||!c.requestAnimationFrame||!c.cancelAnimationFrame){var i=0;c.requestAnimationFrame=function(a){var b=Date.now(),c=Math.max(i+16,b);return setTimeout(function(){a(i=c)},c-b)},c.cancelAnimationFrame=clearTimeout}var j="dynamicNumber",k=a[j]=function(b,c){this.element=b,this.$element=a(b),this.options=a.extend(!0,{},k.defaults,c,this.$element.data()),this.options.step=parseFloat(this.options.step,10),this.first=this.$element.attr("aria-valuenow"),this.first=this.first?this.first:this.options.from,this.first=parseFloat(this.first,10),this.now=this.first,this.to=parseFloat(this.options.to,10),this._requestId=null,this.initialized=!1,this._trigger("init"),this.init()};k.defaults={from:0,to:100,duration:1e3,decimals:0,format:function(a,b){return a.toFixed(b.decimals)},percentage:{decimals:0},currency:{indicator:"$",size:3,decimals:"2",separator:",",decimalsPoint:"."},group:{size:3,decimals:"2",separator:",",decimalsPoint:"."}},k.formaters={percentage:function(a,b){return a.toFixed(b.decimals)+"%"},currency:function(a,b){return b.indicator+k.formaters.group(a,b)},group:function(a,b){var c="",d=b.decimals;if(d){var e=Math.pow(10,d);c=""+Math.round(a*e)/e}else c=""+Math.round(a);if(c=c.split("."),c[0].length>3){var f=new RegExp("\\B(?=(?:\\d{"+b.size+"})+(?!\\d))","g");c[0]=c[0].replace(f,b.separator)}return(c[1]||"").length<d&&(c[1]=c[1]||"",c[1]+=new Array(d-c[1].length+1).join("0")),c.join(b.decimalsPoint)}},k.prototype={constructor:k,init:function(){this.initialized=!0,this._trigger("ready")},_trigger:function(a){var b,c=arguments.length>1?Array.prototype.slice.call(arguments,1):d;c?(b=c,b.push(this)):b=this,this.$element.trigger(j+"::"+a,b),this.$element.trigger(a+"."+j,b),a=a.replace(/\b\w+\b/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1)});var e="on"+a;"function"==typeof this.options[e]&&this.options[e].apply(this,c)},go:function(a){var b=this;this._clear(),a="undefined"==typeof a?this.to:parseFloat(a,10);var d=b.now,f=e(),g=function(e){var h=(e-f)/b.options.duration,i=Math.abs(h*(d-a));a>d?(i=d+i,i>a&&(i=a)):(i=d-i,a>i&&(i=a)),b._update(i),i===a?(c.cancelAnimationFrame(b._requestId),b._requestId=null,b.now===b.to&&b._trigger("finish")):b._requestId=c.requestAnimationFrame(g)};b._requestId=c.requestAnimationFrame(g)},_update:function(a){this.now=a,this.$element.attr("aria-valuenow",this.now);var b=a;isNaN(a)||("function"==typeof this.options.format?b=this.options.format.apply(this,[a,this.options]):"string"==typeof this.options.format&&("undefined"!=typeof k.formaters[this.options.format]?b=k.formaters[this.options.format].apply(this,[a,this.options[this.options.format]]):"function"==typeof c[this.options.format]&&(b=c[this.options.format].apply(this,[a,this.options])))),this.$element.html(b),this._trigger("update",a)},get:function(){return this.now},start:function(){this._clear(),this._trigger("start"),this.go(this.to)},_clear:function(){this._requestId&&(c.cancelAnimationFrame(this._requestId),this._requestId=null)},reset:function(){this._clear(),this._update(this.first),this._trigger("reset")},stop:function(){this._clear(),this._trigger("stop")},finish:function(){this._clear(),this._update(this.to),this._trigger("finish")},destory:function(){this.$element.data(j,null),this._trigger("destory")}},a.fn[j]=function(b){if("string"!=typeof b)return this.each(function(){a.data(this,j)||a.data(this,j,new k(this,b))});var c=b,d=arguments.length>1?Array.prototype.slice.call(arguments,1):[];if(/^\_/.test(c))return!1;if(!/^(get)$/.test(c))return this.each(function(){var b=a.data(this,j);b&&"function"==typeof b[c]&&b[c].apply(b,d)});var e=this.first().data(j);return e&&"function"==typeof e[c]?e[c].apply(e,d):void 0}}(jQuery,document,window);