/*! jQuery dynamicNumber - v0.1.0 - 2014-09-06
* https://github.com/amazingSurge/jquery-dynamicNumber
* Copyright (c) 2014 amazingSurge; Licensed GPL */
!function(a,b,c,d){"use strict";var e="dynamicNumber",f=a[e]=function(b,c){this.element=b,this.$element=a(b),this.options=a.extend(!0,{},f.defaults,c,this.$element.data()),this.options.step=parseFloat(this.options.step,10),this.first=this.$element.attr("aria-valuenow"),this.first=this.first?this.first:this.options.from,this.first=parseFloat(this.first,10),this.now=this.first,this.to=parseFloat(this.options.to,10),this._interval=null,this.initialized=!1,this._trigger("init"),this.init()};f.defaults={from:0,to:100,step:1,speed:20,decimals:0,format:function(a,b){return a.toFixed(b.decimals)},percentage:{decimals:0},currency:{indicator:"$",size:3,decimals:"2",separator:",",decimalsPoint:"."},group:{size:3,decimals:"2",separator:",",decimalsPoint:"."}},f.formaters={percentage:function(a,b){return a.toFixed(b.decimals)+"%"},currency:function(a,b){return b.indicator+f.formaters.group(a,b)},group:function(a,b){var c="",d=b.decimals;if(d){var e=Math.pow(10,d);c=""+Math.round(a*e)/e}else c=""+Math.round(a);if(c=c.split("."),c[0].length>3){var f=new RegExp("\\B(?=(?:\\d{"+b.size+"})+(?!\\d))","g");c[0]=c[0].replace(f,b.separator)}return(c[1]||"").length<d&&(c[1]=c[1]||"",c[1]+=new Array(d-c[1].length+1).join("0")),c.join(b.decimalsPoint)}},f.prototype={constructor:f,init:function(){this.initialized=!0,this._trigger("ready")},_trigger:function(a){var b,c=arguments.length>1?Array.prototype.slice.call(arguments,1):d;c?(b=c,b.push(this)):b=this,this.$element.trigger(e+"::"+a,b),this.$element.trigger(a+"."+e,b),a=a.replace(/\b\w+\b/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1)});var f="on"+a;"function"==typeof this.options[f]&&this.options[f].apply(this,c)},go:function(a){var b=this;this._clear(),a="undefined"==typeof a?this.to:parseFloat(a,10),b._interval=setInterval(function(){var c,d=a-b.now;c=d>0?d<b.options.step?a:b.now+b.options.step:0>d?-d<b.options.step?a:b.now-b.options.step:a,b._update(c),b.now===a&&(clearInterval(b._interval),b._interval=null,b.now===b.to&&b._trigger("finish"))},b.options.speed)},_update:function(a){this.now=a,this.$element.attr("aria-valuenow",this.now);var b=a;isNaN(a)||("function"==typeof this.options.format?b=this.options.format.apply(this,[a,this.options]):"string"==typeof this.options.format&&("undefined"!=typeof f.formaters[this.options.format]?b=f.formaters[this.options.format].apply(this,[a,this.options[this.options.format]]):"function"==typeof c[this.options.format]&&(b=c[this.options.format].apply(this,[a,this.options])))),this.$element.html(b),this._trigger("update",a)},get:function(){return this.now},start:function(){this._clear(),this._trigger("start"),this.go(this.to)},_clear:function(){this._interval&&(clearInterval(this._interval),this._interval=null)},reset:function(){this._clear(),this._update(this.first),this._trigger("reset")},stop:function(){this._clear(),this._trigger("stop")},finish:function(){this._clear(),this._update(this.to),this._trigger("finish")},destory:function(){this.$element.data(e,null),this._trigger("destory")}},a.fn[e]=function(b){if("string"!=typeof b)return this.each(function(){a.data(this,e)||a.data(this,e,new f(this,b))});var c=b,d=arguments.length>1?Array.prototype.slice.call(arguments,1):[];if(/^\_/.test(c))return!1;if(!/^(get)$/.test(c))return this.each(function(){var b=a.data(this,e);b&&"function"==typeof b[c]&&b[c].apply(b,d)});var g=this.first().data(e);return g&&"function"==typeof g[c]?g[c].apply(g,d):void 0}}(jQuery,document,window);